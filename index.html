<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Amazon Fire Hotspot Visualization</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="shortcut icon" href="img/space_orange@.png" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.draw/1.0.4/leaflet.draw.css" />
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <header class="site-header">
    <div class="header-content">
      <!-- Placeholder to keep layout; can be used for a title later -->
      <div></div>
      <div class="top-right-controls">
        <a href="#" class="site-logo">
          <img src="img/space_orange@.png" alt="Project logo">
          <span>FireWatch</span>
        </a>
        <div id="music-controls">
          <button id="volume-down-btn" aria-label="Decrease volume"><svg viewBox="0 0 24 24"><path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"></path></svg></button>
          <button id="play-pause-btn" aria-label="Play/Pause music">
            <svg class="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"></path></svg>
            <svg class="pause-icon" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path></svg>
          </button>
          <button id="volume-up-btn" aria-label="Increase volume"><svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"></path></svg></button>
        </div>
      </div>
    </div>
  </header>

  <div id="webgl-container"></div>
  <div id="map-container"></div>
  <div id="scroll-prompt">
    <div class="mouse">
      <div class="wheel"></div>
    </div>
    <span>Scroll to explore</span>
  </div>

  <main>
    <div class="story-panel">
      <section id="introducao" class="story-section">
        <div class="content">
          <h2>Planet Under Threat</h2>
          <p>
            This is an interactive journey using satellite data to visualize one of the most urgent environmental problems of our time.
            Scroll to begin.
          </p>
        </div>
      </section>

      <section id="america-sul" class="story-section">
        <div class="content">
          <h2>Focus on South America</h2>
          <p>
            Our analysis focuses on South America, a region of unparalleled biodiversity facing major environmental challenges, especially in the Amazon Basin.
          </p>
        </div>
      </section>

      <section id="brasil" class="story-section">
        <div class="content">
          <h2>A Look at Brazil</h2>
          <p>
            Brazil contains most of the Amazon rainforest. As we zoom in, the scale of the forest and its vulnerability become clear.
          </p>
        </div>
      </section>

      <section id="analise-dados" class="story-section">
        <div class="content">
          <h2>Data Analysis</h2>
          <h3><span id="fire-counter">0</span> detected hotspots</h3>
          <p>
            Explore fire hotspots detected by NASA satellites. Drag the slider to travel through time and view data from each of the last 7 days.
          </p>

          <div id="timeslider-container">
            <input type="range" min="0" max="6" value="6" id="time-slider" />
            <div class="labels">
              <span id="start-date-label">7 days ago</span>
              <strong id="current-date-label">Today</strong>
            </div>
          </div>

          <div id="view-toggle-container">
            <button id="toggle-view-btn">Analyze Density</button>
            <button id="about-data-btn">Learn More About the Data</button>
          </div>
        </div>
      </section>

      <section id="conclusao" class="story-section">
        <div class="content">
          <h2>Awareness and Action</h2>
          <p>
            Visualizing data is the first step. Awareness created by these technologies is essential to drive conservation actions and more effective environmental policies.
          </p>
        </div>
      </section>
    </div>

    <!-- Static content starts here -->
    <div class="static-content">
      <section id="fogo">
        <div class="fogo-texto">
          <iframe src="https://storymaps.arcgis.com/stories/61717cbd305d40e89df6f30e0052ad1f" width="100%" height="500px"
            frameborder="0" allowfullscreen sandbox="allow-scripts allow-same-origin"></iframe>
        </div>
      </section>

      <section id="desmatamento-sar">
        <div class="comparison-content">
          <h2>Visible Impact: Deforestation in Rondônia</h2>
          <p>
            Radar images (SAR) reveal agricultural expansion and the "fishbone" pattern of deforestation over decades. Purple/pink indicates intact forest, while green/yellow shows cleared areas.
          </p>
          <div class="image-grid">
            <div class="image-item">
              <h3>BEFORE (1992)</h3>
              <img src="img/2001Sar.jpg" alt="SAR image of Rondônia in 1992 showing less deforestation">
            </div>
            <div class="image-item">
              <h3>AFTER (2018)</h3>
              <img src="img/2019Sar.jpg" alt="SAR image of Rondônia in 2018 showing advanced deforestation">
            </div>
          </div>
          <div class="gif-container">
            <h3>Annual Evolution (2013-2018)</h3>
            <p>The animation below, using Landsat data, shows annual progression of deforestation in the same region.</p>
            <img src="img/desflorestamento-2013-to-2018.gif" alt="Deforestation animation in Rondônia 2013-2018">
          </div>
          <div class="inpe-container">
            <h3>Explore Deforestation Data (INPE)</h3>
            <p>
              Click the button below to see the annual deforestation trend in the Legal Amazon in km² as measured by INPE's PRODES project.
            </p>
            <button id="load-deforestation-chart-btn">View Annual Chart</button>
            <div id="chart-container" style="display: none; position: relative; height: 400px; width: 100%; margin-top: 2rem;">
              <canvas id="deforestation-chart"></canvas>
            </div>
          </div>
        </div>
      </section>

      <section id="sar-rio">
        <div class="sar-texto">
          <h2>Risk Forecast: The Next Step</h2>
          <p>
            Beyond monitoring current hotspots, we can use satellite data to predict future risk areas. Combining soil moisture, vegetation, and cumulative precipitation maps (such as the one below), models can forecast risk.
          </p>
          <p>The <strong>Monte Alegre Formula (FMA)</strong> is one example that computes a fire danger index based on these factors, helping anticipate and proactively act.</p>
          <img src="img/SMEC_prec_acum_ams_2025100400z_108z.png" alt="Accumulated precipitation map"
            style="max-width: 100%; border-radius: 8px; margin-top: 2rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
        </div>
        <div id="mapa-sar-container"></div>
      </section>

      <section id="nossa-contribuicao">
        <div class="contribuicao-texto">
          <h2>Our Contribution: From Monitoring to Prevention</h2>
          <p>
            Visualization is powerful, but real innovation lies in using data to predict and act. Our thesis is that the intersection of recent deforestation areas and high-risk climatic conditions creates ignition zones with a very high probability of fire.
          </p>
          <p>
            The map below crosses the <strong>INPE Fire Risk</strong> layer with <strong>2022 Deforestation Polygons</strong> (INPE). Areas where recent deforestation (magenta) meets critical fire risk (red) are our predictive alerts. These are the locations where prevention resources should be focused.
          </p>
        </div>
        <div id="tese-map-container"></div>
      </section>
    </div>
  </main>

  <div id="data-modal" class="modal-overlay">
    <div class="modal-content">
      <button id="close-modal-btn" class="close-btn">&times;</button>
      <h3>About the Data Source</h3>
      <p>
        Heat hotspot data is provided almost in real time by NASA's
        <strong>FIRMS (Fire Information for Resource Management System)</strong>.
      </p>

      <h4>Satellite & Sensor</h4>
      <p>
        We use data from the <strong>VIIRS</strong> sensor aboard the Suomi NPP satellite, with approximately 375m spatial resolution.
      </p>

      <h4>Accuracy and "Fire at Sea"</h4>
      <p>Note two important characteristics of these data:</p>
      <ul>
        <li>
          <strong>Location uncertainty:</strong> Due to resolution, a coastal fire may appear slightly offshore.
        </li>
        <li>
          <strong>False positives:</strong> The sensor detects intense heat, not flames. Offshore gas flaring on <strong>oil platforms</strong> is frequently reported as hotspots, explaining many ocean points.
        </li>
      </ul>
    </div>
  </div>

  <!-- Background music -->
  <audio id="background-music" src="sound/somEspaco.mp3" loop></audio>

  <footer class="site-footer">
    <p>Developed for the NASA International Space Apps Challenge.</p>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat@0.2.0/dist/leaflet-heat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script src="app.js"></script>
  <script src="desmatamento_ro_2022.js"></script>
  <script src="mapa_inpe.js"></script>
  <script src="musica.js"></script>
</body>

</html>